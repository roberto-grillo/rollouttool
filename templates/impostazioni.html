<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Impostazioni</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      transition: background-color 0.3s, color 0.3s;
    }

    .dark-mode {
      background-color: #1e1e1e;
      color: #f1f1f1;
    }

    .danger-box {
      background-color: #fff3f3;
      border: 2px solid #ff4c4c;
      padding: 20px;
      border-radius: 8px;
      margin-top: 30px;
    }

    .dark-mode .danger-box {
      background-color: #3b1f1f;
      border-color: #ff8888;
    }

    .danger-box h2 { color: #cc0000; }

    button {
      background-color: #ff4c4c;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }

    label { font-weight: bold; display: block; margin-bottom: 10px; }
  </style>
  <script>
    function confermaReset() {
      if (confirm("‚ö† Sei sicuro di voler cancellare tutte le righe della tabella attivit√†?")) {
        if (confirm("‚ùó Questa azione eliminer√† TUTTI I DATI dal database. Vuoi continuare?")) {
          document.getElementById("form-reset").submit();
        }
      }
    }

    function toggleDarkMode(checked) {
      const mode = checked ? 'dark' : 'light';
      localStorage.setItem('theme', mode);
      document.body.classList.toggle('dark-mode', checked);
    }

    window.addEventListener('DOMContentLoaded', () => {
      const current = localStorage.getItem('theme');
      if (current === 'dark') {
        document.body.classList.add('dark-mode');
        document.getElementById('dark-toggle').checked = true;
      }
    });
  </script>
</head>

<body>
  <h1>‚öôÔ∏è Impostazioni</h1>
  <p><a href="{{ url_for('elenco_attivita') }}">‚Üê Torna alla lista attivit√†</a></p>

<label>
  <input type="checkbox" id="dark-toggle" onchange="toggleDarkMode(this.checked)">
  üåô Attiva modalit√† scura
</label>

  
  <div class="danger-box">
    <h2>‚ö†Ô∏è Cancellazione totale del database</h2>
    <p>Questa azione eliminer√† tutte le righe della tabella <strong>attivit√†</strong> e dello <strong>storico modifiche</strong>.</p>
    <form id="form-reset" method="POST" action="{{ url_for('reset_db') }}">
      <button type="button" onclick="confermaReset()">üóëÔ∏è Cancella tutto</button>
    </form>
  </div>
</body>
</html>
